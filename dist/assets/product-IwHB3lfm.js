import{g as s,s as u,a as l}from"./utils-edaSswo0.js";function p(o){if(o.ok)return o.json();throw new Error(`Fetch failed: ${o.status} ${o.statusText}`)}class h{constructor(t){this.category=t,this.path=`../json/${this.category}.json`}getData(){return fetch(this.path).then(p).then(t=>t)}async findProductById(t){const e=(await this.getData()).find(r=>r.Id===t);return e||console.warn(`Product with ID "${t}" not found in ${this.category}.json`),e}}class m{constructor(t,n){this.productId=t,this.product={},this.dataSource=n}async init(){if(this.product=await this.dataSource.findProductById(this.productId),!this.product){document.querySelector("main").innerHTML=`
        <h2 style="text-align:center; padding:2rem;">Product not found.</h2>`;return}this.renderProductDetails();const t=document.getElementById("addToCart");t&&t.addEventListener("click",this.addProductToCart.bind(this))}addProductToCart(){let t=s("so-cart")||[];t.push(this.product),u("so-cart",t)}renderProductDetails(){const t=document.getElementById("productBrand");t&&(t.textContent=this.product.Brand?.Name||"Brand Not Found");const n=document.getElementById("productName");n&&(n.textContent=this.product.NameWithoutBrand||this.product.Name||"Product Name");const e=document.getElementById("productImage");e&&(e.src=this.product.Image||"../images/default.jpg",e.alt=this.product.NameWithoutBrand||this.product.Name);const r=document.querySelector("#productPrice");if(r){const i=parseFloat(this.product.FinalPrice)||0;r.textContent=`$${i.toFixed(2)}`}const d=document.querySelector("#productColor");d&&(d.textContent=this.product.Colors?.[0]?.ColorName||"Unknown");const c=document.querySelector("#productDesc");c&&(c.innerHTML=this.product.DescriptionHtmlSimple||"No description available.");const a=document.getElementById("addToCart");a&&(a.dataset.id=this.product.Id)}}document.addEventListener("DOMContentLoaded",()=>{const o=l("product"),t=new h("tents"),n=new m(o,t),e=document.createElement("p");e.textContent="â³ Loading product...",e.style.textAlign="center",document.querySelector("main").appendChild(e),o&&n.init().then(()=>{e.remove()})});
