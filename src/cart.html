<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sleep Outside | Product with Comments</title>
    <style>
      :root {
        --font-body: Arial, Helvetica, sans-serif;
        --font-headline: Haettenschweiler, "Arial Narrow Bold", sans-serif;
        --primary-color: #f0a868;
        --secondary-color: #525b0f;
        --tertiary-color: #8a470c;
        --light-grey: #d0d0d0;
        --dark-grey: #303030;
        --font-base: 18px;
        --small-font: 0.8em;
        --large-font: 1.2em;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-body);
        font-size: var(--font-base);
        color: var(--dark-grey);
        background-color: #f8f9fa;
      }

      .divider {
        border-bottom: 2px solid var(--primary-color);
      }

      header {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem;
        align-items: center;
        background: white;
      }

      .logo {
        line-height: 60px;
        width: 245px;
        overflow: hidden;
        display: flex;
        font-size: 30px;
        text-align: right;
        font-family: var(--font-headline);
        align-items: center;
      }

      .logo img {
        width: 60px;
        height: 60px;
        margin-right: 10px;
      }

      .logo a {
        text-decoration: none;
        color: var(--dark-grey);
      }

      .highlight {
        color: var(--tertiary-color);
      }

      .cart {
        padding-top: 1em;
        position: relative;
        text-align: center;
      }

      .cart svg {
        width: 25px;
        height: 25px;
      }

      .cart:hover svg {
        fill: gray;
      }

      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
        min-height: 60vh;
      }

      .product-detail {
        background: white;
        border-radius: 8px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .product-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .product-image img {
        width: 100%;
        height: auto;
        border-radius: 8px;
      }

      .product-info h1 {
        color: var(--secondary-color);
        margin-bottom: 1rem;
        font-size: 2rem;
      }

      .product-price {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--tertiary-color);
        margin-bottom: 1rem;
      }

      .product-description {
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }

      .add-to-cart {
        background: var(--secondary-color);
        color: white;
        border: none;
        padding: 1rem 2rem;
        font-size: 1.1rem;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.3s ease;
      }

      .add-to-cart:hover {
        background: var(--tertiary-color);
      }

      /* Comments Section Styles */
      .comments-section {
        background: white;
        border-radius: 8px;
        padding: 2rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .comments-header {
        border-bottom: 2px solid var(--primary-color);
        padding-bottom: 1rem;
        margin-bottom: 2rem;
      }

      .comments-header h2 {
        color: var(--secondary-color);
        font-size: 1.8rem;
        margin-bottom: 0.5rem;
      }

      .comments-count {
        color: #666;
        font-size: 1rem;
      }

      /* Add Comment Form */
      .add-comment-form {
        background: #f8f9fa;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 2rem;
        border: 1px solid var(--light-grey);
      }

      .add-comment-form h3 {
        color: var(--secondary-color);
        margin-bottom: 1rem;
      }

      .form-group {
        margin-bottom: 1rem;
      }

      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
        color: var(--dark-grey);
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 0.8rem;
        border: 1px solid var(--light-grey);
        border-radius: 4px;
        font-size: 1rem;
        font-family: var(--font-body);
      }

      .form-group textarea {
        resize: vertical;
        min-height: 100px;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(240, 168, 104, 0.2);
      }

      .submit-comment {
        background: var(--primary-color);
        color: var(--dark-grey);
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: bold;
        transition: background 0.3s ease;
      }

      .submit-comment:hover {
        background: var(--tertiary-color);
        color: white;
      }

      .submit-comment:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      /* Comments List */
      .comments-list {
        list-style: none;
      }

      .comment-item {
        border-bottom: 1px solid #e9ecef;
        padding: 1.5rem 0;
      }

      .comment-item:last-child {
        border-bottom: none;
      }

      .comment-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.8rem;
      }

      .comment-author {
        font-weight: bold;
        color: var(--secondary-color);
        font-size: 1.1rem;
      }

      .comment-date {
        color: #666;
        font-size: 0.9rem;
      }

      .comment-text {
        line-height: 1.6;
        color: var(--dark-grey);
      }

      .no-comments {
        text-align: center;
        padding: 2rem;
        color: #666;
        font-style: italic;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .product-grid {
          grid-template-columns: 1fr;
        }

        main {
          padding: 1rem;
        }

        .product-detail,
        .comments-section {
          padding: 1rem;
        }

        .add-comment-form {
          padding: 1rem;
        }
      }

      footer {
        background: var(--dark-grey);
        color: var(--light-grey);
        text-align: center;
        padding: 1rem;
        font-size: var(--small-font);
        margin-top: 2rem;
      }
    </style>
  </head>
  <body>
    <header class="divider">
      <div class="logo">
        <img src="/images/noun_Tent_2517.svg" alt="tent image for logo" />
        <a href="../index.html"> Sleep<span class="highlight">Outside</span></a>
      </div>
      <div class="cart">
        <a href="cart/index.html">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <path
              d="M18.9 32.6c1.1 2.4 2.5 3.3 5.4 3.3 1.6 0 3.6-0.3 5.9-0.6 3.2-0.5 6.9-1 11.2-1 2.1 0 4.3 0.1 6.4 0.3 2.1 0.1 4.2 0.3 6.1 0.3 3.2 0 5.2-0.4 5.9-1.2 2.7-2.7 2.8-8.8 2.9-14.6 0.1-6.7 0.2-14.5 4.6-18.7 -0.5 0-1 0-1.6 0 -14.2 0-37.5 0-41.1 0C15.6 6.2 14.9 23.6 18.9 32.6z"
            />
            <path
              d="M90.1 29.7c1-3.3 1.5-7.3 1.5-11.2 0-9-2.7-18.8-8.6-18.8 -0.1 0-0.2 0-0.3 0L77.8-0.1c-0.3 0.2-0.8 0.3-1.1 0.4 0 0 0 0 0 0 -0.2 0-0.3 0-0.4 0 -4.5 0.1-7 1.8-8.4 4.9l8.9-0.1c-1.6 3.6-2.4 8.7-2.4 13.5 0 4.9 0.8 9.9 2.5 13.6l-12.3 0c-0.2 0.4-0.4 0.8-0.6 1.2 -0.2 0.4-0.4 0.7-0.6 1.1 -0.1 0.1-0.1 0.2-0.2 0.3 -0.3 0.4-0.5 0.7-0.9 1.1 0 0 0 0 0 0 0 0-0.1 0.1-0.1 0.1 -0.1 0.1-0.2 0.2-0.4 0.3 -0.2 0.1-0.4 0.3-0.6 0.4 0 0 0 0 0 0 -0.4 0.2-0.9 0.4-1.4 0.6 -1.3 0.4-2.9 0.6-4.9 0.7 -0.5 1.5-1.1 4.1 0 5.5l3.1 3.9 0 0.8c0 2.8-2.3 4.8-2.8 5.2l-3-3.8c0.3-0.2 0.5-0.5 0.7-0.8l-1.8-2.3c-2.2-2.7-1.8-6.3-1.2-8.7 -0.7 0-1.4-0.1-2-0.1 -2.1-0.1-4.3-0.3-6.2-0.3 -4.1 0-7.7 0.5-10.8 1 -1 0.2-2 0.3-3 0.4 -0.5 1.5-1.2 4.4-0.1 5.9l3.1 4 0 0.8c0 2.8-2.3 4.8-2.8 5.2l-3.1-3.8c0.3-0.2 0.6-0.6 0.7-0.9l-1.8-2.4c-2.1-2.8-1.8-6.3-1.2-8.7 -1.6-0.2-2.9-0.8-4-1.7h0c-0.8-0.6-1.4-1.4-2-2.4 -0.1-0.1-0.2-0.3-0.2-0.5 -0.1-0.2-0.2-0.4-0.3-0.6 -0.3-0.6-0.5-1.2-0.7-1.8l-5.6 0c-1-0.3-3.5-4.8-3.5-13.2 0-8.1 3.7-13.1 4.9-13.2L16.4 5.6c0.9-1.9 2-3.7 3.4-5.2L11.2 0.5c-5.4 0-10.1 8.6-10.1 18.4 0 8.9 2.7 18.4 8.6 18.4h2.4c-1.8 10.7-6.6 43 0.4 56.5 0.7 1.4 4.3 3.4 12.2 4.6 20.2 3.1 49.8-0.5 54.6-5.3 0.7-0.7 1.3-1.7 1.8-2.9 2-0.3 8.2-1.7 12.4-8.4C100.1 71.5 98.9 53.9 90.1 29.7zM35.6 87.1c-2.6 2-10.5 2.1-12.1 2.1 0 0 0 0 0 0 -3.9 0-9-0.4-10.8-2.3 -2.6-2.7-1.5-13-0.6-19.1 -0.1-1.9 0-5.8 2.2-7.2 1.9-1.2 8.7-1.3 11.6-1.3 6.4 0 7.4 0.6 7.8 0.9 3 1.8 3.1 5.6 2.6 7.8C37.7 75.5 38.6 84.8 35.6 87.1zM70.1 87.5c-2.6 2-10.5 2.1-12.1 2.1 0 0 0 0 0 0 -3.9 0-9-0.4-10.8-2.3 -2.6-2.7-1.5-13-0.6-19.1 -0.1-1.9 0-5.8 2.2-7.2 1.9-1.2 8.7-1.3 11.6-1.3 6.4 0 7.4 0.6 7.8 0.9 3 1.8 3.1 5.6 2.6 7.8C72.2 76 73.1 85.3 70.1 87.5zM85.9 12.3c-0.6-1.3-1.3-2.2-1.9-2.5 -0.5-0.3-1-0.3-1.4 0 -1.7 1.1-3.2 12.2-0.6 17.9 0.4 0.9 0.9 1.1 1.3 1.1 0.1 0 0.2 0 0.3 0 1.8-0.5 2.1-6.2 1.7-8.6l-1.6 0.2c0.3 2.2 0 5.1-0.4 6.3 -2.1-5.3-0.8-14.1 0.1-15.5 0.8 0.6 2.2 3.5 3.1 8 -0.1 7.9-2.4 12.3-3.4 12.8 -1-0.5-3.4-5.2-3.4-13.5 0-8.3 2.4-13 3.4-13.5C83.7 5.4 85.1 7.9 85.9 12.3zM87.3 77.7c-1.4 2.3-3.1 3.6-4.6 4.3 1.2-12.2-1-31-3.5-44.7h3.3c0.1 0 0.3 0 0.4 0 0.6 0 1.2-0.1 1.8-0.4C92.8 60.7 90.7 72.2 87.3 77.7z"
            />
          </svg>
        </a>
      </div>
    </header>

    <main class="divider">
      <!-- Sample Product Detail -->
      <section class="product-detail">
        <div class="product-grid">
          <div class="product-image">
            <img src="../images/tents/cedar-ridge-rimrock-tent-2-person-3-season-in-rust-clay~p~344yj_01~320.jpg" alt="Cedar Ridge Rimrock Tent" />
          </div>
          <div class="product-info">
            <h1>Rimrock Tent - 2-Person, 3-Season</h1>
            <p class="product-price">$69.99</p>
            <div class="product-description">
              <p>The Cedar Ridge Rimrock Tent is perfect for backpacking adventures. This lightweight, 3-season tent comfortably sleeps 2 people and features excellent ventilation and weather protection.</p>
              <p><strong>Features:</strong></p>
              <ul>
                <li>Lightweight aluminum poles</li>
                <li>Full rainfly coverage</li>
                <li>Two vestibules for gear storage</li>
                <li>Color-coded setup</li>
              </ul>
            </div>
            <button class="add-to-cart" onclick="addToCart()">Add to Cart</button>
          </div>
        </div>
      </section>

      <!-- Comments Section -->
      <section class="comments-section">
        <div class="comments-header">
          <h2>Customer Comments</h2>
          <p class="comments-count" id="comments-count">0 comments</p>
        </div>

        <!-- Add Comment Form -->
        <div class="add-comment-form">
          <h3>Add Your Comment</h3>
          <form id="comment-form">
            <div class="form-group">
              <label for="commenter-name">Your Name *</label>
              <input type="text" id="commenter-name" name="name" required maxlength="50">
            </div>
            <div class="form-group">
              <label for="comment-text">Your Comment *</label>
              <textarea id="comment-text" name="comment" required maxlength="500" placeholder="Share your thoughts about this product..."></textarea>
            </div>
            <button type="submit" class="submit-comment">Post Comment</button>
          </form>
        </div>

        <!-- Comments List -->
        <div class="comments-container">
          <ul class="comments-list" id="comments-list">
            <!-- Comments will be dynamically loaded here -->
          </ul>
          <div class="no-comments" id="no-comments" style="display: none;">
            <p>No comments yet. Be the first to share your thoughts!</p>
          </div>
        </div>
      </section>
    </main>

    <footer>&copy; NOT a real business</footer>

    <script>
      // Comments system
      class CommentsSystem {
        constructor(productId) {
          this.productId = productId;
          this.comments = this.loadComments();
          this.init();
        }

        init() {
          this.renderComments();
          this.setupEventListeners();
        }

        setupEventListeners() {
          const form = document.getElementById('comment-form');
          form.addEventListener('submit', (e) => {
            e.preventDefault();
            this.addComment();
          });
        }

        loadComments() {
          const commentsKey = `comments_${this.productId}`;
          const saved = JSON.parse(localStorage.getItem(commentsKey) || '[]');
          return saved;
        }

        saveComments() {
          const commentsKey = `comments_${this.productId}`;
          localStorage.setItem(commentsKey, JSON.stringify(this.comments));
        }

        addComment() {
          const nameInput = document.getElementById('commenter-name');
          const commentInput = document.getElementById('comment-text');
          
          const name = nameInput.value.trim();
          const text = commentInput.value.trim();

          if (!name || !text) {
            alert('Please fill in all required fields.');
            return;
          }

          const comment = {
            id: Date.now().toString(),
            name: name,
            text: text,
            date: new Date().toISOString()
          };

          this.comments.unshift(comment); // Add to beginning of array
          this.saveComments();
          this.renderComments();

          // Clear form
          nameInput.value = '';
          commentInput.value = '';

          // Show success message
          this.showMessage('Comment added successfully!', 'success');
        }

        renderComments() {
          const commentsList = document.getElementById('comments-list');
          const noComments = document.getElementById('no-comments');
          const commentsCount = document.getElementById('comments-count');

          // Update count
          const count = this.comments.length;
          commentsCount.textContent = `${count} comment${count !== 1 ? 's' : ''}`;

          if (this.comments.length === 0) {
            commentsList.innerHTML = '';
            noComments.style.display = 'block';
            return;
          }

          noComments.style.display = 'none';
          
          commentsList.innerHTML = this.comments.map(comment => `
            <li class="comment-item">
              <div class="comment-header">
                <span class="comment-author">${this.escapeHtml(comment.name)}</span>
                <span class="comment-date">${this.formatDate(comment.date)}</span>
              </div>
              <div class="comment-text">${this.escapeHtml(comment.text)}</div>
            </li>
          `).join('');
        }

        formatDate(dateString) {
          const date = new Date(dateString);
          const now = new Date();
          const diffMs = now - date;
          const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

          if (diffDays === 0) {
            return 'Today';
          } else if (diffDays === 1) {
            return 'Yesterday';
          } else if (diffDays < 7) {
            return `${diffDays} days ago`;
          } else {
            return date.toLocaleDateString();
          }
        }

        escapeHtml(text) {
          const div = document.createElement('div');
          div.textContent = text;
          return div.innerHTML;
        }

        showMessage(message, type) {
          // Create and show a temporary message
          const messageDiv = document.createElement('div');
          messageDiv.textContent = message;
          messageDiv.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            background: ${type === 'success' ? '#28a745' : '#dc3545'};
            color: white;
            border-radius: 4px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
          `;
          
          document.body.appendChild(messageDiv);
          
          setTimeout(() => {
            messageDiv.remove();
          }, 3000);
        }
      }

      // Sample data and functionality
      function addToCart() {
        alert('Product added to cart! (This is a demo)');
      }

      // Initialize comments system when page loads
      document.addEventListener('DOMContentLoaded', function() {
        // Use product ID from URL or default to demo product
        const productId = '344YJ'; // This would normally come from the URL or product data
        new CommentsSystem(productId);
      });
    </script>
  </body>
</html>